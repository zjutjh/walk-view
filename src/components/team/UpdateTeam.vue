<script setup lang="ts">
import { NCard, NForm, NFormItem, NSpace, NInput, NButton, NSelect } from 'naive-ui';
import { SelectMixedOption } from 'naive-ui/lib/select/src/interface';
import { ref } from 'vue'
import { useRouter } from 'vue-router'

let campus = ref(null)
let route = ref(null)
let showRouteOptions = ref(false)
let routeOptions = ref<SelectMixedOption[]>()
const router = useRouter()
const campusOptions = [
    {
        label: 'æœæ™–æ ¡åŒº',
        value: 'zhaohui'
    },
    {
        label: 'å±å³°æ ¡åŒº',
        value: 'pingfeng'
    },
    {
        label: 'è«å¹²å±±æ ¡åŒº',
        value: 'moganshan'
    }
]

function updateRouteOptions() {
    if (campus.value === "zhaohui") {
        routeOptions.value = [{
            label: 'æœæ™–å…¨ç¨‹',
            value: 1
        }]
    } else if (campus.value === "pingfeng") {
        routeOptions.value = [{
            label: 'å±å³°åŠç¨‹',
            value: 2
        }, {
            label: 'å±å³°å…¨ç¨‹',
            value: 3
        }]
    } else if (campus.value === "moganshan") {
        routeOptions.value = [{
            label: 'è«å¹²å±±åŠç¨‹',
            value: 4
        }, {
            label: 'è«å¹²å±±å…¨ç¨‹',
            value: 5
        }]
    }
    if (campus.value !== null)
        showRouteOptions.value = true
    route.value = null  // åˆå§‹åŒ–è·¯çº¿é€‰é¡¹æ•°æ®
}

function createTeam() {

}

function goBack() {
    router.push("/team/teaminfo")
}
</script>

<template>
    <n-card title="ğŸ‘Ÿ åŸºæœ¬ä¿¡æ¯" embedded :bordered="false">
        <div style="margin-top: 15px;">
            <n-form label-placement="top" ref="formRef">
                <n-form-item label="å›¢é˜Ÿåç§°" path="user.name">
                    <n-input placeholder="è¾“å…¥åç§°"></n-input>
                </n-form-item>
                <n-form-item label="å›¢é˜Ÿæ ¡åŒº" path="user.age">
                    <n-select
                        :on-update="updateRouteOptions()"
                        v-model:value="campus"
                        placeholder="é€‰æ‹©æ ¡åŒº"
                        :options="campusOptions"
                    ></n-select>
                </n-form-item>
                <n-form-item label="è·¯çº¿é€‰æ‹©" path="user.age">
                    <n-select
                        :disabled="!showRouteOptions"
                        v-model:value="route"
                        placeholder="é€‰æ‹©æ ¡åŒºåé€‰æ‹©è·¯çº¿"
                        :options="routeOptions"
                    ></n-select>
                </n-form-item>
            </n-form>
        </div>
    </n-card>

    <n-card title="ğŸ§‘â€ğŸ“ é˜Ÿå‘˜ä¿¡æ¯" embedded :bordered="false">
        
    </n-card>

    <n-card embedded :bordered="false">
        <n-space :size="25" style="margin-top: 10px;" :vertical="true">
            <n-button
                @click="createTeam"
                style="width: 100%;"
                type="primary"
                attr-type="button"
            >æ›´æ–°ä¿¡æ¯</n-button>
            <n-button @click="goBack" style="width: 100%;" attr-type="button">è¿”å›ä¸Šä¸€æ­¥</n-button>
        </n-space>
    </n-card>
</template>

<style>
</style>