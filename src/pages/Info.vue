<script setup lang="ts">
import { NCard, NTabs, NTabPane } from 'naive-ui';
import { RouterView, useRouter } from 'vue-router';
import NotJoin from '/src/components/team/NotJoin.vue'
import JoinTeam from '/src/components/team/JoinTeam.vue';
import CreateTeam from '/src/components/team/CreateTeam.vue';
import TeamInfo from '/src/components/team/TeamInfo.vue';
import UpdateTeam from '/src/components/team/UpdateTeam.vue';
import SubmitUserInfo from "/src/components/user/SubmitUserInfo.vue";
import ShowUserInfo from '../components/user/ShowUserInfo.vue';
import { ref } from 'vue';

// æ·»åŠ å›¢é˜Ÿä¿¡æ¯ç›¸å…³çš„ç»„ä»¶çš„è·¯ç”±
const router = useRouter()
// TODO: æ·»åŠ ä¸ªäººä¿¡æ¯ç›¸å…³è·¯ç”±
router.addRoute({ path: "/user/showinfo", component: ShowUserInfo })
// æ·»åŠ å›¢é˜Ÿä¿¡æ¯ç›¸å…³è·¯ç”±
router.addRoute({ path: "/team/notjoin", component: NotJoin })
router.addRoute({ path: "/team/join", component: JoinTeam })
router.addRoute({ path: "/team/create", component: CreateTeam })
router.addRoute({ path: "/team/teaminfo", component: TeamInfo })
router.addRoute({ path: "/team/updateteam", component: UpdateTeam })
router.addRoute({ path: "/team/submit", component: SubmitUserInfo })

router.replace("/user/showinfo") // é»˜è®¤å±•ç¤ºä¸ªäººä¿¡æ¯
function changeTab(value: string) {
    if (value === "team") 
        router.replace("/team/teaminfo") // TODO: è®¾ç½®é»˜è®¤è·¯ç”±ä¸ºå·²ç»åŠ å…¥çŠ¶æ€
    else if (value === "personal") {
        router.replace("/user/showinfo") 
    }
}
</script>

<template>
    <n-card title="æ¯…è¡Œä¿¡æ¯ç®¡ç† ğŸš€" style="margin: 4% auto; width: 93%;">
        <n-tabs @update:value="changeTab" type="line">
            <n-tab-pane name="personal" tab="ä¸ªäººä¿¡æ¯">
                <router-view></router-view>
            </n-tab-pane>
            <n-tab-pane name="team" tab="å›¢é˜Ÿä¿¡æ¯">
                <router-view></router-view>
            </n-tab-pane>
        </n-tabs>
    </n-card>
</template>

<style>
</style>